<script src='../../../assets/vue.min.js'></script>
<script src="./capabilities.js"></script>
<script>
  Homey.setTitle('Choose a device class');



  Homey.getLanguage(function (err, result){

     let language = result;

      Homey.emit('startedClasses', null, function (err, result) {

          new Vue({
              el: '#devices-list',
              data: {
                  classes: result
              },
              props: [
                  'userCarType'
              ],
              methods:{
                  addClass(deviceclass) {
                      Homey.emit('addClass', {'class': deviceclass}, function (err, result) {
                          if(err){console.log(err); return;}
                          Homey.nextView();
                      });
                  },
                  getTitle($value) {
                      // Future proofing for new languages
                      if ($value.title.hasOwnProperty(language)) {
                          return $value.title[language];
                      } else {
                          return $value.title.en;
                      }
                  }
              }
          });
      });


  });



</script>

<ul id="devices-list">
  <li v-for="(value, key) in classes"  v-on:click="addClass(key)" class="device">
    <label for="device" class="name">
      <div class="overlay"></div>
      <span class="icon" v-bind:style="{WebkitMaskImage: 'url(/app/com.swttt.devicegroups/drivers/devicegroup/assets/icons/' + key + '.svg)'}"></span>
      <span class="name" tabindex="-1">{{getTitle(value)}}</span>
    </label>
  </li>
</ul>
